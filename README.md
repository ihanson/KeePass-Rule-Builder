# KeePass Rule Builder
This is a plugin for the [KeePass 2](https://keepass.info/) password manager. With this plugin, you can use the KeePass database to keep track of all of the different requirements that websites have for account passwords, and easily generate new passwords according to those requirements.

The strongest passwords are randomly generated. However, some services unwisely place constraints on the passwords that you can use. A website may state that a password must be less than a certain length, or that it must contain certain types of characters, or that it must *not* contain certain other characters. To make matters worse, every website has different requirements, so changing passwords means reconfiguring your password generator every time.

The [password generator](https://keepass.info/help/base/pwgenerator.html) in KeePass helps with these challenges, but it can still be difficult to configure it to exactly meet the requirements of each service while keeping passwords as strong as possible.

The purpose of this plugin is to make it easy to tell KeePass how to generate a password for each service and to streamline the process of changing passwords.

## Installation
To install this plugin, download the latest version from the [Releases](https://github.com/ihanson/KeePass-Rule-Builder/releases) page and copy it into your KeePass installation‚Äôs Plugins directory. See the [KeePass documentation](https://keepass.info/help/v2/plugins.html) for more help.

#### Chocolatey üì¶ 
Or you can [use Chocolatey to install](https://community.chocolatey.org/packages/keepass-plugin-keetraytotp#install) it in a more automated manner:

```
choco install keepass-plugin-rulebuilder
```

To [upgrade KeePass Plugin Rule Builder](https://community.chocolatey.org/packages/keepass-plugin-rulebuilder#upgrade) to the [latest release version](https://community.chocolatey.org/packages/keepass-plugin-rulebuilder#versionhistory) for enjoying the newest features, run the following command from the command line or from PowerShell:

```
choco upgrade keepass-plugin-rulebuilder
```

## How to use
### Changing a password
To change a password for an entry in KeePass, right-click the password entry and click **Generate New Password**.

<img src="Images/menu.png" alt="Context menu with ‚ÄúGenerate New Password‚Äù selected" width="583.6">

The Change Password window will open. This window shows the current password as well as a new randomly generated password. Copy those passwords into the appropriate fields where you are setting the password. You can also use the hotkeys **Ctrl+Shift+Z** and **Ctrl+Shift+X** to auto-type the old and new passwords, respectively. If you want to set an expiration date, you can do that here.

<img src="Images/change.png" alt="Change Password window" width="488.8">

Once you have successfully changed the password, click **Accept** to store the new password into the KeePass database. Every time you change the password, the old password will be backed up in the entry‚Äôs [history](https://keepass.info/help/v2/entry.html#history).

### Password rules
By default, this tool will generate a new password based on the **Automatically generated passwords for new entries** profile in KeePass. You should [configure this profile](https://keepass.info/help/base/pwgenerator.html#configauto) to produce a very strong password. However, for services for which the passwords generated by this profile are [*too* strong](https://twitter.com/PWTooStrong), the plugin can help you generate a password according to each service‚Äôs individual password policy.

To specify the rules constraining your password, click the **Edit Rule** button from the Change Password window, or select **Edit Password Rule** from the entry context menu. In the Password Rule window, you can specify the rule in one of two ways.

#### Profile
You can select an existing KeePass profile‚Äîeither one that is built into KeePass or a custom one that you have created. To choose this option, select **Profile** and choose the profile you want to use.

<img src="Images/profile.png" alt="The Password Rule dialog with the Profile option selected" width="388.8">

#### Rule
You can also build a password rule by providing a list of the character sets that may, must, or must not be used in the password. To enter a password rule in this way, select the **Rule** option in the Password Rule dialog.

Let‚Äôs say that a website requires passwords with the following properties:

- A password must be 8‚Äì20 characters long.
- A password must contain at least one letter.
- A password must contain at least one digit.
- A password may contain special characters, from the character set `!@#$%^&*()`.
- Passwords must be changed every 18 months.

As shown in the screenshot below, we will first enter a **Length** of *20*, the maximum password length. (There is no point in generating a password shorter than the maximum length.) Then click the **Add Character Set** button to add the built-in **Letters** and **Digits** character sets, and specify that both of them are **Required**. Click **Add Character Set** again to select a **Custom** character set, which you can then populate with the ‚Äúspecial characters‚Äù listed in the password requirements. Finally, indicate that a password generated from this rule expires after 18 months.

<img src="Images/rule.png" alt="The Password Rule dialog with the Rule option selected" width="388.8">

Other options available in the Add Character Set menu are **All characters**, **Punctuation**, **Uppercase letters**, and **Lowercase letters**. If the service for which you are generating a password requires that a password *not* contain certain characters, you can enter those into the **Exclude** field.

<img src="Images/charsets.png" alt="The Add Character Set menu" width="299.6">

The **Example** field in the Edit Rule window shows a sample password that follows the rule or profile that you have selected. (This is not the same password that will be set to the password entry when you save it.)

The [password strength](https://en.wikipedia.org/wiki/Password_strength) is calculated from the configured rule (not the generated password). Every additional bit of strength represents a doubling of the expected time it would take for a hacker to guess the password by brute force.

Once you have finished entering the password requirements, click **Accept**. If you were editing the rule from the Change Password window, a new password will automatically be generated using your new rule. Follow the steps above to save this password.

Any time you need to generate another password, just use the Generate New Password menu item. It will automatically use the rule and expiration date that you have set for that entry.

### Other features
You can access this plugin‚Äôs features from the password generation menu in the standard KeePass editor window. Click **Generate From Rule** to generate a new password based on the entry‚Äôs configured rule, or click **Edit Password Rule** to edit the rule.

<img src="Images/entry.png" alt="The Add Entry dialog with the Generate From Rule and Edit Password Rule menu items visible" width="790.8">

A rule can be configured for a group of entries. This option is available in the context menu of the group. If a group has a rule configured, all entries in that group will use that rule when a password is generated, unless the rule is overridden in the entry itself.

<img src="Images/group.png" alt="The group context menu with the Edit Password Rule menu item visible" width="294.8">

---
Icons made by [Freepik](https://www.flaticon.com/authors/freepik "Freepik") from [www.flaticon.com](https://www.flaticon.com/ "Flaticon")
